<!DOCTYPE html>
<html lang="en-US" dir="ltr">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>组合式API | XDocs</title>
    <meta name="description" content="一个用于记录的vitepress静态博客">
    <link rel="preload stylesheet" href="/xdocs.github.io/assets/style.ff662799.css" as="style">
    
    <script type="module" src="/xdocs.github.io/assets/app.a0d842e0.js"></script>
    <link rel="preload" href="/xdocs.github.io/assets/inter-roman-latin.2ed14f66.woff2" as="font" type="font/woff2" crossorigin="">
    <link rel="modulepreload" href="/xdocs.github.io/assets/chunks/framework.3745025a.js">
    <link rel="modulepreload" href="/xdocs.github.io/assets/chunks/theme.216e2fa4.js">
    <link rel="modulepreload" href="/xdocs.github.io/assets/vue_vue3_API-setup.md.92d8ddb2.lean.js">
    <link rel="icon" type="image/png" href="/logo.svg">
    <script id="check-dark-light">(()=>{const e=localStorage.getItem("vitepress-theme-appearance")||"",a=window.matchMedia("(prefers-color-scheme: dark)").matches;(!e||e==="auto"?a:e==="dark")&&document.documentElement.classList.add("dark")})();</script>
  </head>
  <body>
    <div id="app"><div class="Layout" data-v-cc05ca51><!--[--><!--]--><!--[--><span tabindex="-1" data-v-89c0d34d></span><a href="#VPContent" class="VPSkipLink visually-hidden" data-v-89c0d34d> Skip to content </a><!--]--><!----><header class="VPNav" data-v-cc05ca51 data-v-2e8b09c1><div class="VPNavBar has-sidebar" data-v-2e8b09c1 data-v-754ce103><div class="container" data-v-754ce103><div class="title" data-v-754ce103><div class="VPNavBarTitle has-sidebar" data-v-754ce103 data-v-155a4492><a class="title" href="/xdocs.github.io/" data-v-155a4492><!--[--><!--]--><!--[--><img class="VPImage logo" src="/xdocs.github.io/public/Logo.png" alt data-v-83a8a2e7><!--]--><!--[-->XDocs<!--]--><!--[--><!--]--></a></div></div><div class="content" data-v-754ce103><div class="curtain" data-v-754ce103></div><div class="content-body" data-v-754ce103><!--[--><!--]--><div class="VPNavBarSearch search" style="--vp-meta-key:&#39;Meta&#39;;" data-v-754ce103><!--[--><!----><div id="local-search"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg class="DocSearch-Search-Icon" width="20" height="20" viewBox="0 0 20 20" aria-label="search icon"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"><kbd class="DocSearch-Button-Key"></kbd><kbd class="DocSearch-Button-Key">K</kbd></span></button></div><!--]--></div><nav aria-labelledby="main-nav-aria-label" class="VPNavBarMenu menu" data-v-754ce103 data-v-406ac371><span id="main-nav-aria-label" class="visually-hidden" data-v-406ac371>Main Navigation</span><!--[--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/xdocs.github.io/blog/index.html" tabindex="0" data-v-406ac371 data-v-c55dd5f7><!--[-->网络日志<!--]--></a><!--]--><!--[--><div class="VPFlyout VPNavBarMenuGroup" data-v-406ac371 data-v-b1504db0><button type="button" class="button" aria-haspopup="true" aria-expanded="false" data-v-b1504db0><span class="text" data-v-b1504db0><!----> JS &amp; TS <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="text-icon" data-v-b1504db0><path d="M12,16c-0.3,0-0.5-0.1-0.7-0.3l-6-6c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l5.3,5.3l5.3-5.3c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-6,6C12.5,15.9,12.3,16,12,16z"></path></svg></span></button><div class="menu" data-v-b1504db0><div class="VPMenu" data-v-b1504db0 data-v-638b3262><div class="items" data-v-638b3262><!--[--><!--[--><div class="VPMenuLink" data-v-638b3262 data-v-63a16313><a class="VPLink link" href="/xdocs.github.io/javascript/html5/draggable&amp;touch.html" data-v-63a16313><!--[-->HTML5新增<!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-638b3262 data-v-63a16313><a class="VPLink link" href="/xdocs.github.io/javascript/jsbasic/index.html" data-v-63a16313><!--[-->JS基础<!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-638b3262 data-v-63a16313><a class="VPLink link" href="/xdocs.github.io/javascript/jsdeep/index.html" data-v-63a16313><!--[-->JS高级<!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-638b3262 data-v-63a16313><a class="VPLink link" href="/xdocs.github.io/javascript/es6/index.html" data-v-63a16313><!--[-->ES6及6+<!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-638b3262 data-v-63a16313><a class="VPLink link" href="/xdocs.github.io/javascript/Ajax.html" data-v-63a16313><!--[-->Ajax+<!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-638b3262 data-v-63a16313><a class="VPLink link" href="/xdocs.github.io/tool/jquery/jQuery.html" data-v-63a16313><!--[-->jQuery<!--]--></a></div><!--]--><!--[--><div class="VPMenuGroup" data-v-638b3262 data-v-0150c9b8><p class="title" data-v-0150c9b8>Typescript</p><!--[--><!--[--><div class="VPMenuLink" data-v-0150c9b8 data-v-63a16313><a class="VPLink link" href="/xdocs.github.io/typescript/index.html" data-v-63a16313><!--[-->TS导航<!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-0150c9b8 data-v-63a16313><a class="VPLink link" href="/xdocs.github.io/typescript/typescript.html" data-v-63a16313><!--[-->TS基础<!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-0150c9b8 data-v-63a16313><a class="VPLink link" href="/xdocs.github.io/typescript/typescript-basic.html" data-v-63a16313><!--[-->TS合集<!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-0150c9b8 data-v-63a16313><a class="VPLink link" href="/xdocs.github.io/typescript/js-to-ts.html" data-v-63a16313><!--[-->JS-To-Ts<!--]--></a></div><!--]--><!--]--></div><!--]--><!--]--></div><!--[--><!--]--></div></div></div><!--]--><!--[--><div class="VPFlyout VPNavBarMenuGroup" data-v-406ac371 data-v-b1504db0><button type="button" class="button" aria-haspopup="true" aria-expanded="false" data-v-b1504db0><span class="text" data-v-b1504db0><!----> Vue &amp; React <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="text-icon" data-v-b1504db0><path d="M12,16c-0.3,0-0.5-0.1-0.7-0.3l-6-6c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l5.3,5.3l5.3-5.3c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-6,6C12.5,15.9,12.3,16,12,16z"></path></svg></span></button><div class="menu" data-v-b1504db0><div class="VPMenu" data-v-b1504db0 data-v-638b3262><div class="items" data-v-638b3262><!--[--><!--[--><div class="VPMenuGroup" data-v-638b3262 data-v-0150c9b8><p class="title" data-v-0150c9b8>Vue</p><!--[--><!--[--><div class="VPMenuLink" data-v-0150c9b8 data-v-63a16313><a class="VPLink link" href="/xdocs.github.io/vue/vue2/index.html" data-v-63a16313><!--[-->Vue2<!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-0150c9b8 data-v-63a16313><a class="VPLink link" href="/xdocs.github.io/vue/vue-router/index.html" data-v-63a16313><!--[-->Vue-Router<!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-0150c9b8 data-v-63a16313><a class="VPLink link" href="/xdocs.github.io/vue/vuex/vuex.html" data-v-63a16313><!--[-->VueX<!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-0150c9b8 data-v-63a16313><a class="VPLink link" href="/xdocs.github.io/vue/vue3/index.html" data-v-63a16313><!--[-->Vue3<!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-0150c9b8 data-v-63a16313><a class="VPLink link" href="/xdocs.github.io/vue/pina/pina.html" data-v-63a16313><!--[-->Pina<!--]--></a></div><!--]--><!--]--></div><!--]--><!--[--><div class="VPMenuGroup" data-v-638b3262 data-v-0150c9b8><p class="title" data-v-0150c9b8>React</p><!--[--><!--[--><div class="VPMenuLink" data-v-0150c9b8 data-v-63a16313><a class="VPLink link" href="/xdocs.github.io/react/jsx/JSX.html" data-v-63a16313><!--[-->React-JSX<!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-0150c9b8 data-v-63a16313><a class="VPLink link" href="/xdocs.github.io/react/react18/create-react-app.html" data-v-63a16313><!--[-->React18<!--]--></a></div><!--]--><!--]--></div><!--]--><!--]--></div><!--[--><!--]--></div></div></div><!--]--><!--[--><div class="VPFlyout VPNavBarMenuGroup" data-v-406ac371 data-v-b1504db0><button type="button" class="button" aria-haspopup="true" aria-expanded="false" data-v-b1504db0><span class="text" data-v-b1504db0><!----> 小程序 <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="text-icon" data-v-b1504db0><path d="M12,16c-0.3,0-0.5-0.1-0.7-0.3l-6-6c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l5.3,5.3l5.3-5.3c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-6,6C12.5,15.9,12.3,16,12,16z"></path></svg></span></button><div class="menu" data-v-b1504db0><div class="VPMenu" data-v-b1504db0 data-v-638b3262><div class="items" data-v-638b3262><!--[--><!--[--><div class="VPMenuLink" data-v-638b3262 data-v-63a16313><a class="VPLink link" href="/xdocs.github.io/miniProgram/native.html" data-v-63a16313><!--[-->微信小程序<!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-638b3262 data-v-63a16313><a class="VPLink link" href="/xdocs.github.io/miniProgram/uniapp.html" data-v-63a16313><!--[-->Uniapp<!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-638b3262 data-v-63a16313><a class="VPLink link" href="/xdocs.github.io/miniProgram/map.html" data-v-63a16313><!--[-->位置和地图<!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-638b3262 data-v-63a16313><a class="VPLink link" href="/xdocs.github.io/miniProgram/reactnative.html" data-v-63a16313><!--[-->React-Native<!--]--></a></div><!--]--><!--]--></div><!--[--><!--]--></div></div></div><!--]--><!--[--><div class="VPFlyout VPNavBarMenuGroup" data-v-406ac371 data-v-b1504db0><button type="button" class="button" aria-haspopup="true" aria-expanded="false" data-v-b1504db0><span class="text" data-v-b1504db0><!----> 业务场景 <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="text-icon" data-v-b1504db0><path d="M12,16c-0.3,0-0.5-0.1-0.7-0.3l-6-6c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l5.3,5.3l5.3-5.3c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-6,6C12.5,15.9,12.3,16,12,16z"></path></svg></span></button><div class="menu" data-v-b1504db0><div class="VPMenu" data-v-b1504db0 data-v-638b3262><div class="items" data-v-638b3262><!--[--><!--[--><div class="VPMenuLink" data-v-638b3262 data-v-63a16313><a class="VPLink link" href="/xdocs.github.io/scene/upload/index.html" data-v-63a16313><!--[-->文件上传<!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-638b3262 data-v-63a16313><a class="VPLink link" href="/xdocs.github.io/scene/water/waterfall.html" data-v-63a16313><!--[-->瀑布流<!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-638b3262 data-v-63a16313><a class="VPLink link" href="/xdocs.github.io/scene/skeleton/index.html" data-v-63a16313><!--[-->骨架屏<!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-638b3262 data-v-63a16313><a class="VPLink link" href="/xdocs.github.io/tool/websocket.html" data-v-63a16313><!--[-->WebSocket<!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-638b3262 data-v-63a16313><a class="VPLink link" href="/xdocs.github.io/scene/liveplayer.html" data-v-63a16313><!--[-->直播流<!--]--></a></div><!--]--><!--]--></div><!--[--><!--]--></div></div></div><!--]--><!--[--><div class="VPFlyout VPNavBarMenuGroup" data-v-406ac371 data-v-b1504db0><button type="button" class="button" aria-haspopup="true" aria-expanded="false" data-v-b1504db0><span class="text" data-v-b1504db0><!----> 工程化及部署 <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="text-icon" data-v-b1504db0><path d="M12,16c-0.3,0-0.5-0.1-0.7-0.3l-6-6c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l5.3,5.3l5.3-5.3c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-6,6C12.5,15.9,12.3,16,12,16z"></path></svg></span></button><div class="menu" data-v-b1504db0><div class="VPMenu" data-v-b1504db0 data-v-638b3262><div class="items" data-v-638b3262><!--[--><!--[--><div class="VPMenuGroup" data-v-638b3262 data-v-0150c9b8><p class="title" data-v-0150c9b8>工程化</p><!--[--><!--[--><div class="VPMenuLink" data-v-0150c9b8 data-v-63a16313><a class="VPLink link" href="/xdocs.github.io/tool/axios/index.html" data-v-63a16313><!--[-->Axios<!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-0150c9b8 data-v-63a16313><a class="VPLink link" href="/xdocs.github.io/tool/element-ui/index.html" data-v-63a16313><!--[-->Element-Ui<!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-0150c9b8 data-v-63a16313><a class="VPLink link" href="/xdocs.github.io/tool/node/index.html" data-v-63a16313><!--[-->Nodejs<!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-0150c9b8 data-v-63a16313><a class="VPLink link" href="/xdocs.github.io/tool/less.html" data-v-63a16313><!--[-->Less<!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-0150c9b8 data-v-63a16313><a class="VPLink link" href="/xdocs.github.io/tool/sass.html" data-v-63a16313><!--[-->Sass<!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-0150c9b8 data-v-63a16313><a class="VPLink link" href="/xdocs.github.io/tool/webpack.html" data-v-63a16313><!--[-->Webpack<!--]--></a></div><!--]--><!--]--></div><!--]--><!--[--><div class="VPMenuGroup" data-v-638b3262 data-v-0150c9b8><p class="title" data-v-0150c9b8>部署和测试</p><!--[--><!--[--><div class="VPMenuLink" data-v-0150c9b8 data-v-63a16313><a class="VPLink link" href="/xdocs.github.io/tool/vitest.html" data-v-63a16313><!--[-->Vitest<!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-0150c9b8 data-v-63a16313><a class="VPLink link" href="/xdocs.github.io/other/mysql.html" data-v-63a16313><!--[-->Mysql<!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-0150c9b8 data-v-63a16313><a class="VPLink link" href="/xdocs.github.io/other/git.html" data-v-63a16313><!--[-->Gitee<!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-0150c9b8 data-v-63a16313><a class="VPLink link" href="/xdocs.github.io/other/nvm.html" data-v-63a16313><!--[-->Nvm<!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-0150c9b8 data-v-63a16313><a class="VPLink link" href="/xdocs.github.io/other/npm-recommend.html" data-v-63a16313><!--[-->Npm包推荐<!--]--></a></div><!--]--><!--]--></div><!--]--><!--]--></div><!--[--><!--]--></div></div></div><!--]--><!--[--><div class="VPFlyout VPNavBarMenuGroup" data-v-406ac371 data-v-b1504db0><button type="button" class="button" aria-haspopup="true" aria-expanded="false" data-v-b1504db0><span class="text" data-v-b1504db0><!----> 练功房 <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="text-icon" data-v-b1504db0><path d="M12,16c-0.3,0-0.5-0.1-0.7-0.3l-6-6c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l5.3,5.3l5.3-5.3c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-6,6C12.5,15.9,12.3,16,12,16z"></path></svg></span></button><div class="menu" data-v-b1504db0><div class="VPMenu" data-v-b1504db0 data-v-638b3262><div class="items" data-v-638b3262><!--[--><!--[--><div class="VPMenuLink" data-v-638b3262 data-v-63a16313><a class="VPLink link" href="/xdocs.github.io/resource/index.html" data-v-63a16313><!--[-->源码解析<!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-638b3262 data-v-63a16313><a class="VPLink link" href="/xdocs.github.io/javascript/dataStructure.html" data-v-63a16313><!--[-->数据结构与算法<!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-638b3262 data-v-63a16313><a class="VPLink link" href="/xdocs.github.io/javascript/computerNet.html" data-v-63a16313><!--[-->计算机网络<!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-638b3262 data-v-63a16313><a class="VPLink link vp-external-link-icon" href="https://xiao-shenghui.github.io/xdocs-leetcode/#/" target="_blank" rel="noreferrer" data-v-63a16313><!--[-->LeetCode题解<!--]--></a></div><!--]--><!--]--></div><!--[--><!--]--></div></div></div><!--]--><!--[--><a class="VPLink link vp-external-link-icon VPNavBarMenuLink" href="https://vitepress.dev/reference/default-theme-nav" target="_blank" rel="noreferrer" tabindex="0" data-v-406ac371 data-v-c55dd5f7><!--[-->配置网站<!--]--></a><!--]--><!--]--></nav><!----><div class="VPNavBarAppearance appearance" data-v-754ce103 data-v-3d0d31f8><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" title="toggle dark mode" aria-checked="false" data-v-3d0d31f8 data-v-5b6566e1 data-v-22a900cd><span class="check" data-v-22a900cd><span class="icon" data-v-22a900cd><!--[--><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="sun" data-v-5b6566e1><path d="M12,18c-3.3,0-6-2.7-6-6s2.7-6,6-6s6,2.7,6,6S15.3,18,12,18zM12,8c-2.2,0-4,1.8-4,4c0,2.2,1.8,4,4,4c2.2,0,4-1.8,4-4C16,9.8,14.2,8,12,8z"></path><path d="M12,4c-0.6,0-1-0.4-1-1V1c0-0.6,0.4-1,1-1s1,0.4,1,1v2C13,3.6,12.6,4,12,4z"></path><path d="M12,24c-0.6,0-1-0.4-1-1v-2c0-0.6,0.4-1,1-1s1,0.4,1,1v2C13,23.6,12.6,24,12,24z"></path><path d="M5.6,6.6c-0.3,0-0.5-0.1-0.7-0.3L3.5,4.9c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l1.4,1.4c0.4,0.4,0.4,1,0,1.4C6.2,6.5,5.9,6.6,5.6,6.6z"></path><path d="M19.8,20.8c-0.3,0-0.5-0.1-0.7-0.3l-1.4-1.4c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l1.4,1.4c0.4,0.4,0.4,1,0,1.4C20.3,20.7,20,20.8,19.8,20.8z"></path><path d="M3,13H1c-0.6,0-1-0.4-1-1s0.4-1,1-1h2c0.6,0,1,0.4,1,1S3.6,13,3,13z"></path><path d="M23,13h-2c-0.6,0-1-0.4-1-1s0.4-1,1-1h2c0.6,0,1,0.4,1,1S23.6,13,23,13z"></path><path d="M4.2,20.8c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l1.4-1.4c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-1.4,1.4C4.7,20.7,4.5,20.8,4.2,20.8z"></path><path d="M18.4,6.6c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l1.4-1.4c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-1.4,1.4C18.9,6.5,18.6,6.6,18.4,6.6z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="moon" data-v-5b6566e1><path d="M12.1,22c-0.3,0-0.6,0-0.9,0c-5.5-0.5-9.5-5.4-9-10.9c0.4-4.8,4.2-8.6,9-9c0.4,0,0.8,0.2,1,0.5c0.2,0.3,0.2,0.8-0.1,1.1c-2,2.7-1.4,6.4,1.3,8.4c2.1,1.6,5,1.6,7.1,0c0.3-0.2,0.7-0.3,1.1-0.1c0.3,0.2,0.5,0.6,0.5,1c-0.2,2.7-1.5,5.1-3.6,6.8C16.6,21.2,14.4,22,12.1,22zM9.3,4.4c-2.9,1-5,3.6-5.2,6.8c-0.4,4.4,2.8,8.3,7.2,8.7c2.1,0.2,4.2-0.4,5.8-1.8c1.1-0.9,1.9-2.1,2.4-3.4c-2.5,0.9-5.3,0.5-7.5-1.1C9.2,11.4,8.1,7.7,9.3,4.4z"></path></svg><!--]--></span></span></button></div><div class="VPSocialLinks VPNavBarSocialLinks social-links" data-v-754ce103 data-v-6472daf6 data-v-d3bde303><!--[--><a class="VPSocialLink no-icon" href="https://github.com/xiao-shenghui/xdocs" aria-label="github" target="_blank" rel="noopener" data-v-d3bde303 data-v-43edd1e6><svg role="img" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><title>GitHub</title><path d="M12 .297c-6.63 0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577 0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93 0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176 0 0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22 0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22 0 1.606-.015 2.896-.015 3.286 0 .315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12"/></svg></a><!--]--></div><div class="VPFlyout VPNavBarExtra extra" data-v-754ce103 data-v-80bb2895 data-v-b1504db0><button type="button" class="button" aria-haspopup="true" aria-expanded="false" aria-label="extra navigation" data-v-b1504db0><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="icon" data-v-b1504db0><circle cx="12" cy="12" r="2"></circle><circle cx="19" cy="12" r="2"></circle><circle cx="5" cy="12" r="2"></circle></svg></button><div class="menu" data-v-b1504db0><div class="VPMenu" data-v-b1504db0 data-v-638b3262><!----><!--[--><!--[--><!----><div class="group" data-v-80bb2895><div class="item appearance" data-v-80bb2895><p class="label" data-v-80bb2895>Appearance</p><div class="appearance-action" data-v-80bb2895><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" title="toggle dark mode" aria-checked="false" data-v-80bb2895 data-v-5b6566e1 data-v-22a900cd><span class="check" data-v-22a900cd><span class="icon" data-v-22a900cd><!--[--><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="sun" data-v-5b6566e1><path d="M12,18c-3.3,0-6-2.7-6-6s2.7-6,6-6s6,2.7,6,6S15.3,18,12,18zM12,8c-2.2,0-4,1.8-4,4c0,2.2,1.8,4,4,4c2.2,0,4-1.8,4-4C16,9.8,14.2,8,12,8z"></path><path d="M12,4c-0.6,0-1-0.4-1-1V1c0-0.6,0.4-1,1-1s1,0.4,1,1v2C13,3.6,12.6,4,12,4z"></path><path d="M12,24c-0.6,0-1-0.4-1-1v-2c0-0.6,0.4-1,1-1s1,0.4,1,1v2C13,23.6,12.6,24,12,24z"></path><path d="M5.6,6.6c-0.3,0-0.5-0.1-0.7-0.3L3.5,4.9c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l1.4,1.4c0.4,0.4,0.4,1,0,1.4C6.2,6.5,5.9,6.6,5.6,6.6z"></path><path d="M19.8,20.8c-0.3,0-0.5-0.1-0.7-0.3l-1.4-1.4c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l1.4,1.4c0.4,0.4,0.4,1,0,1.4C20.3,20.7,20,20.8,19.8,20.8z"></path><path d="M3,13H1c-0.6,0-1-0.4-1-1s0.4-1,1-1h2c0.6,0,1,0.4,1,1S3.6,13,3,13z"></path><path d="M23,13h-2c-0.6,0-1-0.4-1-1s0.4-1,1-1h2c0.6,0,1,0.4,1,1S23.6,13,23,13z"></path><path d="M4.2,20.8c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l1.4-1.4c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-1.4,1.4C4.7,20.7,4.5,20.8,4.2,20.8z"></path><path d="M18.4,6.6c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l1.4-1.4c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-1.4,1.4C18.9,6.5,18.6,6.6,18.4,6.6z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="moon" data-v-5b6566e1><path d="M12.1,22c-0.3,0-0.6,0-0.9,0c-5.5-0.5-9.5-5.4-9-10.9c0.4-4.8,4.2-8.6,9-9c0.4,0,0.8,0.2,1,0.5c0.2,0.3,0.2,0.8-0.1,1.1c-2,2.7-1.4,6.4,1.3,8.4c2.1,1.6,5,1.6,7.1,0c0.3-0.2,0.7-0.3,1.1-0.1c0.3,0.2,0.5,0.6,0.5,1c-0.2,2.7-1.5,5.1-3.6,6.8C16.6,21.2,14.4,22,12.1,22zM9.3,4.4c-2.9,1-5,3.6-5.2,6.8c-0.4,4.4,2.8,8.3,7.2,8.7c2.1,0.2,4.2-0.4,5.8-1.8c1.1-0.9,1.9-2.1,2.4-3.4c-2.5,0.9-5.3,0.5-7.5-1.1C9.2,11.4,8.1,7.7,9.3,4.4z"></path></svg><!--]--></span></span></button></div></div></div><div class="group" data-v-80bb2895><div class="item social-links" data-v-80bb2895><div class="VPSocialLinks social-links-list" data-v-80bb2895 data-v-d3bde303><!--[--><a class="VPSocialLink no-icon" href="https://github.com/xiao-shenghui/xdocs" aria-label="github" target="_blank" rel="noopener" data-v-d3bde303 data-v-43edd1e6><svg role="img" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><title>GitHub</title><path d="M12 .297c-6.63 0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577 0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93 0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176 0 0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22 0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22 0 1.606-.015 2.896-.015 3.286 0 .315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12"/></svg></a><!--]--></div></div></div><!--]--><!--]--></div></div></div><!--[--><!--]--><button type="button" class="VPNavBarHamburger hamburger" aria-label="mobile navigation" aria-expanded="false" aria-controls="VPNavScreen" data-v-754ce103 data-v-1c815ef4><span class="container" data-v-1c815ef4><span class="top" data-v-1c815ef4></span><span class="middle" data-v-1c815ef4></span><span class="bottom" data-v-1c815ef4></span></span></button></div></div></div></div><!----></header><div class="VPLocalNav reached-top" data-v-cc05ca51 data-v-2949bdc3><button class="menu" aria-expanded="false" aria-controls="VPSidebarNav" data-v-2949bdc3><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="menu-icon" data-v-2949bdc3><path d="M17,11H3c-0.6,0-1-0.4-1-1s0.4-1,1-1h14c0.6,0,1,0.4,1,1S17.6,11,17,11z"></path><path d="M21,7H3C2.4,7,2,6.6,2,6s0.4-1,1-1h18c0.6,0,1,0.4,1,1S21.6,7,21,7z"></path><path d="M21,15H3c-0.6,0-1-0.4-1-1s0.4-1,1-1h18c0.6,0,1,0.4,1,1S21.6,15,21,15z"></path><path d="M17,19H3c-0.6,0-1-0.4-1-1s0.4-1,1-1h14c0.6,0,1,0.4,1,1S17.6,19,17,19z"></path></svg><span class="menu-text" data-v-2949bdc3>Menu</span></button><div class="VPLocalNavOutlineDropdown" style="--vp-vh:0px;" data-v-2949bdc3 data-v-e20deee4><button data-v-e20deee4>Return to top</button><!----></div></div><aside class="VPSidebar" data-v-cc05ca51 data-v-86531e24><div class="curtain" data-v-86531e24></div><nav class="nav" id="VPSidebarNav" aria-labelledby="sidebar-aria-label" tabindex="-1" data-v-86531e24><span class="visually-hidden" id="sidebar-aria-label" data-v-86531e24> Sidebar Navigation </span><!--[--><!--]--><!--[--><div class="group" data-v-86531e24><section class="VPSidebarItem level-0 has-active" data-v-86531e24 data-v-656cef80><div class="item" role="button" tabindex="0" data-v-656cef80><div class="indicator" data-v-656cef80></div><h2 class="text" data-v-656cef80>Vue3</h2><!----></div><div class="items" data-v-656cef80><!--[--><div class="VPSidebarItem level-1 is-link" data-v-656cef80 data-v-656cef80><div class="item" data-v-656cef80><div class="indicator" data-v-656cef80></div><a class="VPLink link link" href="/xdocs.github.io/vue/vue3/index.html" data-v-656cef80><!--[--><p class="text" data-v-656cef80>导航目录</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-656cef80 data-v-656cef80><div class="item" data-v-656cef80><div class="indicator" data-v-656cef80></div><a class="VPLink link link" href="/xdocs.github.io/vue/vue3/basic.html" data-v-656cef80><!--[--><p class="text" data-v-656cef80>vue3基础</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-656cef80 data-v-656cef80><div class="item" data-v-656cef80><div class="indicator" data-v-656cef80></div><a class="VPLink link link" href="/xdocs.github.io/vue/vue3/deep.html" data-v-656cef80><!--[--><p class="text" data-v-656cef80>vue3深入</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-656cef80 data-v-656cef80><div class="item" data-v-656cef80><div class="indicator" data-v-656cef80></div><a class="VPLink link link" href="/xdocs.github.io/vue/vue3/API-global.html" data-v-656cef80><!--[--><p class="text" data-v-656cef80>vue3全局API</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link is-active has-active" data-v-656cef80 data-v-656cef80><div class="item" data-v-656cef80><div class="indicator" data-v-656cef80></div><a class="VPLink link link" href="/xdocs.github.io/vue/vue3/API-setup.html" data-v-656cef80><!--[--><p class="text" data-v-656cef80>vue3组合式API</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-656cef80 data-v-656cef80><div class="item" data-v-656cef80><div class="indicator" data-v-656cef80></div><a class="VPLink link link" href="/xdocs.github.io/vue/vue3/API-build.html" data-v-656cef80><!--[--><p class="text" data-v-656cef80>vue3内置内容</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-656cef80 data-v-656cef80><div class="item" data-v-656cef80><div class="indicator" data-v-656cef80></div><a class="VPLink link link" href="/xdocs.github.io/vue/vue3/API-deep.html" data-v-656cef80><!--[--><p class="text" data-v-656cef80>vue3进阶API</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-656cef80 data-v-656cef80><div class="item" data-v-656cef80><div class="indicator" data-v-656cef80></div><a class="VPLink link link" href="/xdocs.github.io/vue/vue3/Script-setup.html" data-v-656cef80><!--[--><p class="text" data-v-656cef80>vue3-setup语法糖</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><!--]--><!--[--><!--]--></nav></aside><div class="VPContent has-sidebar" id="VPContent" data-v-cc05ca51 data-v-52dceb50><div class="VPDoc has-sidebar has-aside" data-v-52dceb50 data-v-66b8709f><!--[--><!--]--><div class="container" data-v-66b8709f><div class="aside" data-v-66b8709f><div class="aside-curtain" data-v-66b8709f></div><div class="aside-container" data-v-66b8709f><div class="aside-content" data-v-66b8709f><div class="VPDocAside" data-v-66b8709f data-v-344b3131><!--[--><!--]--><!--[--><!--]--><div class="VPDocAsideOutline" data-v-344b3131 data-v-d9f2713e><div class="content" data-v-d9f2713e><div class="outline-marker" data-v-d9f2713e></div><div class="outline-title" data-v-d9f2713e>On this page</div><nav aria-labelledby="doc-outline-aria-label" data-v-d9f2713e><span class="visually-hidden" id="doc-outline-aria-label" data-v-d9f2713e> Table of Contents for current page </span><ul class="root" data-v-d9f2713e data-v-7e190b5d><!--[--><!--]--></ul></nav></div></div><!--[--><!--]--><div class="spacer" data-v-344b3131></div><!--[--><!--]--><!----><!--[--><!--]--><!--[--><!--]--></div></div></div></div><div class="content" data-v-66b8709f><div class="content-container" data-v-66b8709f><!--[--><!--]--><!----><main class="main" data-v-66b8709f><div style="position:relative;" class="vp-doc _xdocs_github_io_vue_vue3_API-setup" data-v-66b8709f><div><h1 id="组合式api" tabindex="-1">组合式API <a class="header-anchor" href="#组合式api" aria-label="Permalink to &quot;组合式API&quot;">​</a></h1><blockquote><p>本篇内容，完全参考至<a href="https://cn.vuejs.org/api/" target="_blank" rel="noreferrer">vue3官网API</a>.<br> 以下主要学习常用的API,完整API请参阅官网。</p></blockquote><h2 id="setup" tabindex="-1">setup() <a class="header-anchor" href="#setup" aria-label="Permalink to &quot;setup()&quot;">​</a></h2><blockquote><p>组件中使用组合式API的入口函数，通常适用<code>非单文件组件</code>(例如.html)或者<code>基于选项式</code>使用组合式API.</p></blockquote><h3 id="基本使用" tabindex="-1">基本使用 <a class="header-anchor" href="#基本使用" aria-label="Permalink to &quot;基本使用&quot;">​</a></h3><blockquote><p>setup()函数可以将内部的<code>响应式API</code>声明的<code>对象</code>，暴露给<code>组件实例</code>或者<code>模板</code>使用。</p></blockquote><ul><li>注意事项：</li></ul><ol><li>组件实例或者模板使用时，<code>ref对象</code>会<code>自动解包</code>，而不需要加<code>.value</code>.</li><li>setup函数内使用时，没有<code>this</code>, 并且<code>ref对象</code>需要加<code>.value</code></li></ol><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;">// 基于选项式使用组合式API</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">import</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">ref</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;font-style:italic;">from</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">vue</span><span style="color:#89DDFF;">&#39;</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">export</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;font-style:italic;">default</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">setup</span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#C792EA;">const</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">num</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#82AAFF;">ref</span><span style="color:#F07178;">(</span><span style="color:#F78C6C;">0</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;font-style:italic;">// setup函数内，return暴露给组件实例或者模板使用</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#C792EA;">const</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">addNum2</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#C792EA;">function</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">()</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#89DDFF;">      </span><span style="color:#676E95;font-style:italic;">// 在setup函数内，需要用.value</span></span>
<span class="line"><span style="color:#89DDFF;">      </span><span style="color:#676E95;font-style:italic;">// 另外，setup函数内，没有this</span></span>
<span class="line"><span style="color:#F07178;">      </span><span style="color:#A6ACCD;">num</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">value</span><span style="color:#89DDFF;">++</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;font-style:italic;">// 需要暴露出去</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;font-style:italic;">return</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">      </span><span style="color:#A6ACCD;">num</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#F07178;">      </span><span style="color:#A6ACCD;">addNum2</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">},</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">methods</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">addNum</span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#89DDFF;">      </span><span style="color:#676E95;font-style:italic;">// 注意，在实例上使用this访问时会自动解包</span></span>
<span class="line"><span style="color:#F07178;">      </span><span style="color:#89DDFF;">this.</span><span style="color:#A6ACCD;">num</span><span style="color:#89DDFF;">++</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br></div></div><div class="language-html line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">html</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">span</span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;">使用时自动解包: {{ num }}</span><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">span</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">button</span><span style="color:#89DDFF;"> </span><span style="color:#C792EA;">@click</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">addNum</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;">methods添加</span><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">button</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">button</span><span style="color:#89DDFF;"> </span><span style="color:#C792EA;">@click</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">addNum2</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;">setup添加</span><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">button</span><span style="color:#89DDFF;">&gt;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h3 id="访问props" tabindex="-1">访问Props <a class="header-anchor" href="#访问props" aria-label="Permalink to &quot;访问Props&quot;">​</a></h3><blockquote><p><code>setup()函数</code>接收的<code>第一个参数</code>是<code>props选项的值</code>, 并且默认是响应式的。 <code>setup语法糖</code>使用<code>defineProps()</code>接收<code>props对象的值</code>。</p></blockquote><ul><li>注意事项</li></ul><ol><li>不仅是<code>setup()</code>中，即使是<code>setup语法糖</code>的<code>defineProps()</code>中，如果你解构了<code>props对象</code>, 将丢失响应式。</li><li>如果你想让<code>props</code>解构后依旧有响应式，推荐使用<code>toRefs</code>和<code>toRef</code>两个<code>工具函数</code>。</li><li><code>setup语法糖</code>内使用<code>defineProps()</code>传参时，就和选项式的<code>props</code>的值类型一样，支持数组或者对象。</li></ol><ul><li></li></ul><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;">// setup()函数内访问props</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">export</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;font-style:italic;">default</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#89DDFF;">	</span><span style="color:#676E95;font-style:italic;">// props的值是对象</span></span>
<span class="line"><span style="color:#A6ACCD;">	</span><span style="color:#F07178;">props</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">		</span><span style="color:#F07178;">title</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> String</span></span>
<span class="line"><span style="color:#A6ACCD;">	</span><span style="color:#89DDFF;">},</span></span>
<span class="line"><span style="color:#A6ACCD;">	</span><span style="color:#F07178;">setup</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;font-style:italic;">props</span><span style="color:#89DDFF;">){</span></span>
<span class="line"><span style="color:#89DDFF;">		</span><span style="color:#676E95;font-style:italic;">// const { title } = props;</span></span>
<span class="line"><span style="color:#89DDFF;">		</span><span style="color:#676E95;font-style:italic;">// 将使得title丢失响应性</span></span>
<span class="line"><span style="color:#89DDFF;">		</span><span style="color:#676E95;font-style:italic;">// 建议使用toRefs()工具函数</span></span>
<span class="line"><span style="color:#F07178;">		</span><span style="color:#C792EA;">const</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">{</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">title</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">}</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#82AAFF;">toRefs</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">props</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">		</span><span style="color:#89DDFF;font-style:italic;">return</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">			</span><span style="color:#A6ACCD;">title</span></span>
<span class="line"><span style="color:#F07178;">		</span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#F07178;">	</span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;">// setup语法糖访问props</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">import</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">toRefs</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;font-style:italic;">from</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">vue</span><span style="color:#89DDFF;">&#39;</span></span>
<span class="line"><span style="color:#C792EA;">const</span><span style="color:#A6ACCD;"> msg </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">defineProps</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">	</span><span style="color:#F07178;">title</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> String</span></span>
<span class="line"><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;">)</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">// 使用toRefs解构</span></span>
<span class="line"><span style="color:#C792EA;">const</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span><span style="color:#A6ACCD;"> title </span><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">toRefs</span><span style="color:#A6ACCD;">(msg)</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br></div></div><h3 id="访问this上下文" tabindex="-1">访问this上下文 <a class="header-anchor" href="#访问this上下文" aria-label="Permalink to &quot;访问this上下文&quot;">​</a></h3><blockquote><p>setup函数的第二个参数是<code>context</code>上下文对象, 也就类似于<code>this</code><br> 并且该<code>对象</code>是非响应式的，可以安全的<code>解构</code>。</p></blockquote><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#89DDFF;font-style:italic;">export</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;font-style:italic;">default</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#89DDFF;">	</span><span style="color:#676E95;font-style:italic;">// context  { attrs, slots, emit, expose }</span></span>
<span class="line"><span style="color:#A6ACCD;">	</span><span style="color:#F07178;">setup</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;font-style:italic;">props</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;font-style:italic;">context</span><span style="color:#89DDFF;">){</span></span>
<span class="line"><span style="color:#89DDFF;">		</span><span style="color:#676E95;font-style:italic;">//等价于this.$attrs</span></span>
<span class="line"><span style="color:#89DDFF;">		</span><span style="color:#676E95;font-style:italic;">// 透传Attributes</span></span>
<span class="line"><span style="color:#F07178;">		</span><span style="color:#A6ACCD;">console</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">log</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">context</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">attrs</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span><span style="color:#F07178;"> </span></span>
<span class="line"><span style="color:#89DDFF;">		</span><span style="color:#676E95;font-style:italic;">// 等价于this.$slots</span></span>
<span class="line"><span style="color:#89DDFF;">		</span><span style="color:#676E95;font-style:italic;">// 插槽对象</span></span>
<span class="line"><span style="color:#F07178;">		</span><span style="color:#A6ACCD;">console</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">log</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">context</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">slots</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">		</span><span style="color:#676E95;font-style:italic;">// 等价于this.$emit</span></span>
<span class="line"><span style="color:#89DDFF;">		</span><span style="color:#676E95;font-style:italic;">// 提交触发事件</span></span>
<span class="line"><span style="color:#F07178;">		</span><span style="color:#A6ACCD;">console</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">log</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">context</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">emit</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">		</span><span style="color:#676E95;font-style:italic;">// 限制暴露的公共属性、</span></span>
<span class="line"><span style="color:#F07178;">		</span><span style="color:#A6ACCD;">console</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">log</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">context</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">expose</span><span style="color:#F07178;">)</span></span>
<span class="line"><span style="color:#F07178;">	</span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><blockquote><p><code>expose</code>用于显示限制return暴露的属性。<br> 当父组件通过<code>模板引用</code>访问子组件中的属性时，只能访问<code>expose</code>暴露的属性。</p></blockquote><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#82AAFF;">expose</span><span style="color:#A6ACCD;">()</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;">  </span><span style="color:#676E95;font-style:italic;">//不暴露任何内容</span></span>
<span class="line"><span style="color:#C792EA;">const</span><span style="color:#A6ACCD;"> myCount </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">ref</span><span style="color:#A6ACCD;">(</span><span style="color:#F78C6C;">0</span><span style="color:#A6ACCD;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#82AAFF;">expose</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">{</span><span style="color:#F07178;">count</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;">myCount </span><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;">)</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;font-style:italic;">//显示暴露myCount, 父组件通过count访问。</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h3 id="返回一个渲染函数" tabindex="-1">返回一个渲染函数 <a class="header-anchor" href="#返回一个渲染函数" aria-label="Permalink to &quot;返回一个渲染函数&quot;">​</a></h3><blockquote><p>setup函数不仅可以使用<code>return</code>暴露属性，也可以返回一个<code>h</code>函数。<br> 如果返回一个渲染函数，则没法暴露属性，此时可以用到<code>expose</code></p></blockquote><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#89DDFF;font-style:italic;">import</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">h</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">toRefs</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#A6ACCD;">export </span><span style="color:#89DDFF;font-style:italic;">default</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">	</span><span style="color:#A6ACCD;">props</span><span style="color:#F07178;">: {</span></span>
<span class="line"><span style="color:#F07178;">		</span><span style="color:#A6ACCD;">title</span><span style="color:#F07178;">: </span><span style="color:#A6ACCD;">String</span></span>
<span class="line"><span style="color:#F07178;">	</span><span style="color:#89DDFF;">},</span></span>
<span class="line"><span style="color:#A6ACCD;">	setup(props</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span><span style="color:#A6ACCD;">expose</span><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;">)</span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">		</span><span style="color:#A6ACCD;">const</span><span style="color:#F07178;"> { </span><span style="color:#A6ACCD;">title</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;"> = toRefs(props);</span></span>
<span class="line"><span style="color:#A6ACCD;">		expose(</span><span style="color:#89DDFF;">{</span><span style="color:#A6ACCD;">title</span><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;">)</span></span>
<span class="line"><span style="color:#A6ACCD;">		return () =&gt; h(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">div</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{},</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">hello</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">	}</span></span>
<span class="line"><span style="color:#A6ACCD;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><h2 id="响应式核心" tabindex="-1">响应式核心 <a class="header-anchor" href="#响应式核心" aria-label="Permalink to &quot;响应式核心&quot;">​</a></h2><h3 id="ref" tabindex="-1">ref() <a class="header-anchor" href="#ref" aria-label="Permalink to &quot;ref()&quot;">​</a></h3><blockquote><p>返回一个<code>响应式的</code>，<code>可更改</code>的ref<code>对象</code>。此对象只有<code>一个</code>指向其内部值的属性<code>.value</code>。</p></blockquote><ul><li>注意几个点：</li></ul><ol><li>响应式的</li><li>可更改的</li><li>只有一个属性<code>.value</code>, 并且指向<code>内部值</code>。</li></ol><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">const</span><span style="color:#A6ACCD;"> num </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">ref</span><span style="color:#A6ACCD;">(</span><span style="color:#F78C6C;">0</span><span style="color:#A6ACCD;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">// 此时num为响应式的，带有.value指向其内部值0</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">// 并且num.value可被赋值或更改，且改完后依旧是响应式的</span></span>
<span class="line"><span style="color:#A6ACCD;">num</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">value </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">1</span><span style="color:#89DDFF;">;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><blockquote><p>另外如果将<code>一个对象</code>赋值给<code>ref对象</code>, 或者作为<code>内部值</code>，那么这个对象将通过<code>reactive()</code>转为<code>深层次</code>的响应式对象。</p></blockquote><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">const</span><span style="color:#A6ACCD;"> obj </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">ref</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">	</span><span style="color:#F07178;">name</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">wc</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">	</span><span style="color:#F07178;">user</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">		</span><span style="color:#F07178;">info</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">www</span><span style="color:#89DDFF;">&#39;</span></span>
<span class="line"><span style="color:#A6ACCD;">	</span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;">)</span></span>
<span class="line"><span style="color:#A6ACCD;">obj</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">value</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">name </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">xx</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><blockquote><p>如果想避免这个发生，可以使用<code>shallowRef()</code>替代。(<code>shallow</code>: 浅的，表面的)</p></blockquote><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">const</span><span style="color:#A6ACCD;"> obj </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">shallowRef</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">	</span><span style="color:#F07178;">name</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">wc</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">	</span><span style="color:#F07178;">user</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">		</span><span style="color:#F07178;">info</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">www</span><span style="color:#89DDFF;">&#39;</span></span>
<span class="line"><span style="color:#A6ACCD;">	</span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;">)</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h3 id="reactive" tabindex="-1">reactive() <a class="header-anchor" href="#reactive" aria-label="Permalink to &quot;reactive()&quot;">​</a></h3><blockquote><p>返回一个对象的响应式<code>代理</code>对象, 并且这个代理是深层的。<br><code>模板</code>或者<code>组件实例内</code>使用时将自动解包<br> 另外，<code>reactive()内</code>也将深层的解包所有的<code>ref属性</code>, 并保持与<code>源数据一致</code>。<br> 如果要避免深层次响应式，可以使用<code>shallowReactive()</code>替代。</p></blockquote><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">const</span><span style="color:#A6ACCD;"> num </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">ref</span><span style="color:#A6ACCD;">(</span><span style="color:#F78C6C;">0</span><span style="color:#A6ACCD;">)</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;font-style:italic;">//一个ref对象</span></span>
<span class="line"><span style="color:#C792EA;">const</span><span style="color:#A6ACCD;"> obj </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">reactive</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">	</span><span style="color:#F07178;">count</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">1</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;font-style:italic;">//普通的响应性属性</span></span>
<span class="line"><span style="color:#A6ACCD;">	num  </span><span style="color:#676E95;font-style:italic;">//将自动解包num.value</span></span>
<span class="line"><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;">)</span></span>
<span class="line"><span style="color:#A6ACCD;">obj</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">count</span><span style="color:#89DDFF;">++</span><span style="color:#A6ACCD;">  </span></span>
<span class="line"><span style="color:#A6ACCD;">obj</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">num</span><span style="color:#89DDFF;">++</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">console</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">log</span><span style="color:#A6ACCD;">(obj</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">num)</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;font-style:italic;">//1</span></span>
<span class="line"><span style="color:#A6ACCD;">console</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">log</span><span style="color:#A6ACCD;">(num)</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;font-style:italic;">//1</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><blockquote><p>官网：将一个 <code>ref</code> <code>赋值</code>给一个 <code>reactive 属性</code>时，该 ref 会<code>被自动解包</code>。</p></blockquote><h3 id="readonly" tabindex="-1">readonly() <a class="header-anchor" href="#readonly" aria-label="Permalink to &quot;readonly()&quot;">​</a></h3><blockquote><p>接受一个对象, 无论是reactive,ref，或普通对象，返回<code>一个读代理</code>。</p></blockquote><ul><li>注意：</li></ul><ol><li>也是一种代理，但是<code>属性只读</code>。</li><li>使用<code>isReadonly()</code>和<code>isProxy()</code>都是<code>true</code></li><li><code>深层的</code>代理。如果不想深层代理，可以使用<code>shallowReadonly()</code>代理。</li></ol><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">const</span><span style="color:#A6ACCD;"> user </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">readonly</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">	</span><span style="color:#F07178;">name</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">admin</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">	</span><span style="color:#F07178;">info</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">		</span><span style="color:#F07178;">age</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">18</span></span>
<span class="line"><span style="color:#A6ACCD;">	</span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;">)</span></span>
<span class="line"><span style="color:#A6ACCD;">user</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">name </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">ddd</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;font-style:italic;">//Vue Warn &#39;name&#39; is readonly</span></span>
<span class="line"><span style="color:#A6ACCD;">user</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">info</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">age </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">19</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;font-style:italic;">//Vue Warn &#39;age&#39; is readonly</span></span>
<span class="line"><span style="color:#82AAFF;">isProxy</span><span style="color:#A6ACCD;">(user)</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;font-style:italic;">//true</span></span>
<span class="line"><span style="color:#82AAFF;">isReadonly</span><span style="color:#A6ACCD;">(user)</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;font-style:italic;">//true</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><h3 id="watch" tabindex="-1">watch() <a class="header-anchor" href="#watch" aria-label="Permalink to &quot;watch()&quot;">​</a></h3><blockquote><p>类似于vue2的<code>watch选项</code>，支持监听多个，支持<code>flush</code>调整时机，支持<code>随时停止监听</code>。 第1个参数: 手动指定监听依赖, 支持监听getters函数，ref对象, 支持数组形式监听多个. 第2个参数: 接收一个回调作为参数，回调带有<code>newValue</code>和<code>oldValue</code>.<br> 第3个参数: <code>配置项对象</code>支持<code>立即监听</code>和<code>深度监听</code>。<br> 调用其<code>返回值</code>, 即可随时停止监听。</p></blockquote><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">const</span><span style="color:#A6ACCD;"> count </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">ref</span><span style="color:#A6ACCD;">(</span><span style="color:#F78C6C;">0</span><span style="color:#A6ACCD;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#C792EA;">const</span><span style="color:#A6ACCD;"> age </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">ref</span><span style="color:#A6ACCD;">(</span><span style="color:#F78C6C;">18</span><span style="color:#A6ACCD;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#C792EA;">const</span><span style="color:#A6ACCD;"> cancelWatch </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">watch</span><span style="color:#A6ACCD;">(count</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;font-style:italic;">newValue</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;font-style:italic;">oldValue</span><span style="color:#89DDFF;">)</span><span style="color:#C792EA;">=&gt;</span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">	</span><span style="color:#A6ACCD;">console</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">log</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">newValue</span><span style="color:#F07178;">)</span></span>
<span class="line"><span style="color:#89DDFF;">},{</span></span>
<span class="line"><span style="color:#A6ACCD;">	</span><span style="color:#F07178;">deep</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FF9CAC;">true</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;font-style:italic;">//深度监听</span></span>
<span class="line"><span style="color:#A6ACCD;">	</span><span style="color:#F07178;">immediate</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FF9CAC;">true</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;font-style:italic;">//立即监听</span></span>
<span class="line"><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#82AAFF;">cancelWatch</span><span style="color:#A6ACCD;">()</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;font-style:italic;">//支持随时监听。</span></span>
<span class="line"></span>
<span class="line"><span style="color:#82AAFF;">watch</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">()</span><span style="color:#C792EA;">=&gt;</span><span style="color:#A6ACCD;">count</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">value</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;font-style:italic;">newValue</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;font-style:italic;">oldValue</span><span style="color:#89DDFF;">)</span><span style="color:#C792EA;">=&gt;</span><span style="color:#89DDFF;">{</span><span style="color:#F07178;">   </span><span style="color:#676E95;font-style:italic;">//传入getters</span></span>
<span class="line"><span style="color:#F07178;">	</span><span style="color:#A6ACCD;">console</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">log</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">newValue</span><span style="color:#F07178;">)</span></span>
<span class="line"><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;">)  </span></span>
<span class="line"></span>
<span class="line"><span style="color:#82AAFF;">watch</span><span style="color:#A6ACCD;">([count</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;">age]</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">([</span><span style="color:#A6ACCD;font-style:italic;">newCountValue</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;font-style:italic;">newAgeValue</span><span style="color:#89DDFF;">],</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;font-style:italic;">oldValue</span><span style="color:#89DDFF;">)</span><span style="color:#C792EA;">=&gt;</span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#89DDFF;">	</span><span style="color:#676E95;font-style:italic;">// 此时，newValue是一个数组，可以解构</span></span>
<span class="line"><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;">)</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br></div></div><h3 id="watcheffect" tabindex="-1">watchEffect() <a class="header-anchor" href="#watcheffect" aria-label="Permalink to &quot;watchEffect()&quot;">​</a></h3><blockquote><p>对比watch更加强大, 可以立即执行一个<code>回调函数</code>，同时监听<code>函数内</code>响应式依赖变化。<br> watch需要<code>手动</code>指定依赖对象，而watchEffect可以<code>自动</code>收集<code>函数内</code>的响应式依赖。<br> watchEffect一样也支持<code>随时停止监听</code>, 调用<code>返回值</code>即可。</p></blockquote><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">const</span><span style="color:#A6ACCD;"> count </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">ref</span><span style="color:#A6ACCD;">(</span><span style="color:#F78C6C;">0</span><span style="color:#A6ACCD;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#C792EA;">const</span><span style="color:#A6ACCD;"> cancelWatch </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">watchEffect</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">()</span><span style="color:#C792EA;">=&gt;</span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#89DDFF;">	</span><span style="color:#676E95;font-style:italic;">// 自定收集count</span></span>
<span class="line"><span style="color:#F07178;">	</span><span style="color:#A6ACCD;">console</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">log</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">count</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">value</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span><span style="color:#F07178;"> </span><span style="color:#676E95;font-style:italic;">//0</span></span>
<span class="line"><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;">// 支持随时停止监听</span></span>
<span class="line"><span style="color:#82AAFF;">cancelWatch</span><span style="color:#A6ACCD;">()</span><span style="color:#89DDFF;">;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><blockquote><p>watchEffect也可以<code>用于清理副作用</code>.<br> 在回调函数中接受<code>1个参数</code>用于清理，可以调用<code>该参数</code>，传入对应的<code>清理逻辑</code>。</p></blockquote><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">const</span><span style="color:#A6ACCD;"> count </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">ref</span><span style="color:#A6ACCD;">(</span><span style="color:#F78C6C;">0</span><span style="color:#A6ACCD;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#82AAFF;">watchEffect</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;font-style:italic;">clearEffect</span><span style="color:#89DDFF;">)</span><span style="color:#C792EA;">=&gt;</span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#89DDFF;">	</span><span style="color:#676E95;font-style:italic;">// 自定收集count</span></span>
<span class="line"><span style="color:#F07178;">	</span><span style="color:#A6ACCD;">console</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">log</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">count</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">value</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">	</span><span style="color:#676E95;font-style:italic;">// 模拟异步请求</span></span>
<span class="line"><span style="color:#F07178;">	</span><span style="color:#C792EA;">let</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">timer</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#82AAFF;">setTimeout</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">()</span><span style="color:#C792EA;">=&gt;</span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">		</span><span style="color:#A6ACCD;">console</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">log</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">发送请求成功</span><span style="color:#89DDFF;">&#39;</span><span style="color:#F07178;">)</span></span>
<span class="line"><span style="color:#F07178;">	</span><span style="color:#89DDFF;">}</span><span style="color:#F07178;">，</span><span style="color:#F78C6C;">2000</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">	</span><span style="color:#676E95;font-style:italic;">// 调用回调函数的第一个参数，清理副作用</span></span>
<span class="line"><span style="color:#F07178;">	</span><span style="color:#82AAFF;">clearEffect</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">()</span><span style="color:#C792EA;">=&gt;</span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">		</span><span style="color:#82AAFF;">clearTimeout</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">timer</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">		</span><span style="color:#A6ACCD;">console</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">log</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">清理副作用成功</span><span style="color:#89DDFF;">&#39;</span><span style="color:#F07178;">)</span></span>
<span class="line"><span style="color:#F07178;">	</span><span style="color:#89DDFF;">}</span><span style="color:#F07178;">)</span></span>
<span class="line"><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;">)</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><blockquote><p>watchEffect默认<code>组件渲染之前</code>执行，也可以<code>自定义执行时机</code>.<br> 传入第2个参数, 是一个配置项对象，配置<code>flush</code>。</p></blockquote><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#82AAFF;">watchEffect</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">()</span><span style="color:#C792EA;">=&gt;</span><span style="color:#89DDFF;">{</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;">},{</span></span>
<span class="line"><span style="color:#A6ACCD;">	</span><span style="color:#F07178;">flush</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">post</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">;   </span><span style="color:#676E95;font-style:italic;">//组件渲染之后执行</span></span>
<span class="line"><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;">)</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h4 id="总结" tabindex="-1">总结 <a class="header-anchor" href="#总结" aria-label="Permalink to &quot;总结&quot;">​</a></h4><ol><li>第1个参数作用: 自动收集依赖，监听。同时支持接收1个参数用于清理副作用。</li><li>第2个参数作用: 配置对象，配置<code>flush</code>自定义执行时机。</li></ol><h4 id="执行时机别名" tabindex="-1">执行时机别名 <a class="header-anchor" href="#执行时机别名" aria-label="Permalink to &quot;执行时机别名&quot;">​</a></h4><blockquote><p>除了在<code>watchEffect</code>的第2个参数，手动指定配置项定义执行时机。<br> 也可以使用<code>watchPostEffect()</code>和<code>watchSyncEffect()</code>两个别名。</p></blockquote><h2 id="响应式工具" tabindex="-1">响应式工具 <a class="header-anchor" href="#响应式工具" aria-label="Permalink to &quot;响应式工具&quot;">​</a></h2><h3 id="isref" tabindex="-1">isRef() <a class="header-anchor" href="#isref" aria-label="Permalink to &quot;isRef()&quot;">​</a></h3><blockquote><p>判断一个值是否为<code>ref</code>。</p></blockquote><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">const</span><span style="color:#A6ACCD;"> num </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">ref</span><span style="color:#A6ACCD;">(</span><span style="color:#F78C6C;">0</span><span style="color:#A6ACCD;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#C792EA;">const</span><span style="color:#A6ACCD;"> age </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">18</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#82AAFF;">isRef</span><span style="color:#A6ACCD;">(num)</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;font-style:italic;">//true</span></span>
<span class="line"><span style="color:#82AAFF;">isRef</span><span style="color:#A6ACCD;">(age)</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;font-style:italic;">//false</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h3 id="unref" tabindex="-1">unref() <a class="header-anchor" href="#unref" aria-label="Permalink to &quot;unref()&quot;">​</a></h3><blockquote><p>解包工具，如果一个值是ref对象，将返回其<code>.value</code>, 否则返回本身。</p></blockquote><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;">// 本质是isRef()表达式的语法糖</span></span>
<span class="line"><span style="color:#A6ACCD;">val </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">isRef</span><span style="color:#A6ACCD;">(val) </span><span style="color:#89DDFF;">?</span><span style="color:#A6ACCD;"> val</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">value </span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> val</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h3 id="toref" tabindex="-1">toRef() <a class="header-anchor" href="#toref" aria-label="Permalink to &quot;toRef()&quot;">​</a></h3><blockquote><p>根据<code>值</code>, <code>ref对象</code>, <code>getters函数</code>或者一个<code>响应式对象上的属性</code>，创建为一个<code>ref对象</code><br> 常用于<code>props</code>对象某些属性<code>解构</code>后，<code>丢失响应性</code>的问题。</p></blockquote><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;">// 如果是值，跟ref()效果一致</span></span>
<span class="line"><span style="color:#C792EA;">const</span><span style="color:#A6ACCD;"> num </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">toRef</span><span style="color:#A6ACCD;">(</span><span style="color:#F78C6C;">0</span><span style="color:#A6ACCD;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">// 并且支持getters函数</span></span>
<span class="line"><span style="color:#C792EA;">const</span><span style="color:#A6ACCD;"> foo </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">toRef</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">()</span><span style="color:#C792EA;">=&gt;</span><span style="color:#A6ACCD;"> props</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">foo)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C792EA;">const</span><span style="color:#A6ACCD;"> obj </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">reactive</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">	</span><span style="color:#F07178;">name</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">zhangsan</span><span style="color:#89DDFF;">&#39;</span></span>
<span class="line"><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C792EA;">const</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span><span style="color:#A6ACCD;"> name </span><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">toRef</span><span style="color:#A6ACCD;">(obj</span><span style="color:#89DDFF;">,</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">name</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">)</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> </span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">//此时如果不提前toRef, name就会丢失了响应性</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C792EA;">const</span><span style="color:#A6ACCD;"> user </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">reactive</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#F07178;">name</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">wc</span><span style="color:#89DDFF;">&#39;</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#C792EA;">const</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span><span style="color:#A6ACCD;"> name </span><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> user</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">//解构将直接丢失响应性</span></span>
<span class="line"><span style="color:#A6ACCD;">console</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">log</span><span style="color:#A6ACCD;">(name)</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;font-style:italic;">//wc</span></span>
<span class="line"><span style="color:#A6ACCD;">user</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">name </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">ddd</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">console</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">log</span><span style="color:#A6ACCD;">(name)</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;font-style:italic;">//wc</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;">// 由于是创建ref对象，如果源值更新了，ref对象也会更新。</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br></div></div><h3 id="tovalue" tabindex="-1">toValue() <a class="header-anchor" href="#tovalue" aria-label="Permalink to &quot;toValue()&quot;">​</a></h3><blockquote><p>与<code>unref()</code>类似，但是如果值是<code>函数</code>，将返回函数<code>执行的结果</code>。</p></blockquote><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">const</span><span style="color:#A6ACCD;"> num </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">ref</span><span style="color:#A6ACCD;">(</span><span style="color:#F78C6C;">0</span><span style="color:#A6ACCD;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">console</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">log</span><span style="color:#A6ACCD;">(</span><span style="color:#82AAFF;">toValue</span><span style="color:#A6ACCD;">(num))</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;font-style:italic;">//num.value 0</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C792EA;">const</span><span style="color:#A6ACCD;"> sayHello </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">function</span><span style="color:#89DDFF;">(){</span></span>
<span class="line"><span style="color:#F07178;">	</span><span style="color:#89DDFF;font-style:italic;">return</span><span style="color:#F07178;"> </span><span style="color:#F78C6C;">123</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C792EA;">const</span><span style="color:#A6ACCD;"> res </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">toValue</span><span style="color:#A6ACCD;">(sayHello) </span><span style="color:#676E95;font-style:italic;">//123</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h3 id="torefs" tabindex="-1">toRefs() <a class="header-anchor" href="#torefs" aria-label="Permalink to &quot;toRefs()&quot;">​</a></h3><blockquote><p>把一个<code>reactive</code>或者<code>响应式对象</code>转换为一个普通对象，并且该对象的每个属性，都使用了<code>toRef()</code>创建。<br> 应用: 常用于<code>props解构后丢失响应性</code>的解决，让其<code>保持</code>响应性。<br> 因此包装后的<code>对象.属性.value</code>与<code>源数据属性值</code>将始终<code>保持一致</code>。</p></blockquote><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">const</span><span style="color:#A6ACCD;"> user </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">reactive</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">	</span><span style="color:#F07178;">name</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">admin</span><span style="color:#89DDFF;">&#39;</span></span>
<span class="line"><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C792EA;">const</span><span style="color:#A6ACCD;"> userMy </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">toRefs</span><span style="color:#A6ACCD;">(user)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">user</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">name </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">admin123</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">console</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">log</span><span style="color:#A6ACCD;">(userMy</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">name</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">value)</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;font-style:italic;">//admin123</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><h3 id="isproxy" tabindex="-1">isProxy() <a class="header-anchor" href="#isproxy" aria-label="Permalink to &quot;isProxy()&quot;">​</a></h3><blockquote><p>检查一个对象是否由<code>reactive()</code>, <code>readonly()</code>, <code>shallowReactive()</code>或者<code>shallowReadonly()</code>代理。<br> 由此可见<code>readonly()</code>在设置一个对象的属性为只读的同时，也是一种<code>代理</code>。</p></blockquote><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">const</span><span style="color:#A6ACCD;"> obj </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">readonly</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">	</span><span style="color:#F07178;">name</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">wc</span><span style="color:#89DDFF;">&#39;</span></span>
<span class="line"><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;">)</span></span>
<span class="line"><span style="color:#A6ACCD;">console</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">log</span><span style="color:#A6ACCD;">(obj</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">isProxy</span><span style="color:#A6ACCD;">())</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;font-style:italic;">//true</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h3 id="isreactive" tabindex="-1">isReactive() <a class="header-anchor" href="#isreactive" aria-label="Permalink to &quot;isReactive()&quot;">​</a></h3><blockquote><p>检查一个对象是否由<code>reactive()</code>或者<code>shallowReactive()</code>代理。</p></blockquote><h3 id="isreadonly" tabindex="-1">isReadonly() <a class="header-anchor" href="#isreadonly" aria-label="Permalink to &quot;isReadonly()&quot;">​</a></h3><blockquote><p>检查一个对象是否为<code>只读对象</code>.<br> 通过<code>readonly()</code>或者<code>shallowReadonly()</code>代理设置的对象，都是<code>只读的</code>, 因为其没有<code>set函数</code>的<code>computed()</code>ref;</p></blockquote><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">const</span><span style="color:#A6ACCD;"> obj </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">readonly</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">name</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">1223</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">user</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">address</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">郑州</span><span style="color:#89DDFF;">&#39;</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;">)</span></span>
<span class="line"><span style="color:#A6ACCD;">console</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">log</span><span style="color:#A6ACCD;">(</span><span style="color:#82AAFF;">isReadonly</span><span style="color:#A6ACCD;">(obj))</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;font-style:italic;">//true</span></span>
<span class="line"><span style="color:#A6ACCD;">console</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">log</span><span style="color:#A6ACCD;">(</span><span style="color:#82AAFF;">isReadonly</span><span style="color:#A6ACCD;">(obj</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">name))</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;font-style:italic;">//false</span></span>
<span class="line"><span style="color:#A6ACCD;">console</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">log</span><span style="color:#A6ACCD;">(</span><span style="color:#82AAFF;">isReadonly</span><span style="color:#A6ACCD;">(obj</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">user))</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;font-style:italic;">//true</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><h2 id="响应式进阶" tabindex="-1">响应式进阶 <a class="header-anchor" href="#响应式进阶" aria-label="Permalink to &quot;响应式进阶&quot;">​</a></h2><h3 id="shallowref" tabindex="-1">shallowRef() <a class="header-anchor" href="#shallowref" aria-label="Permalink to &quot;shallowRef()&quot;">​</a></h3><blockquote><p><code>ref</code>浅层的响应式形式,只对于<code>.value</code>是响应式的。<br> 官方: 常用于性能优化, 减少大型不可变数据的响应性开销。 只有<code>.value</code>整个改变，才会刷新视图，触发<code>监听</code></p></blockquote><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">const</span><span style="color:#A6ACCD;"> obj </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span><span style="color:#F07178;">state</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">123</span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#C792EA;">const</span><span style="color:#A6ACCD;"> count </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">ref</span><span style="color:#A6ACCD;">(obj)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">count</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">value</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">state </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">345</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">console</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">log</span><span style="color:#A6ACCD;">(count</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">value)</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;">  </span><span style="color:#676E95;font-style:italic;">//Proxy(Object) {state: 345}</span></span>
<span class="line"><span style="color:#A6ACCD;">console</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">log</span><span style="color:#A6ACCD;">(obj)</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;">  </span><span style="color:#676E95;font-style:italic;">//{state: 345} 响应式，跟着改变</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C792EA;">const</span><span style="color:#A6ACCD;"> obj2 </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span><span style="color:#F07178;">state</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">123</span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#C792EA;">const</span><span style="color:#A6ACCD;"> count2 </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">shallowRef</span><span style="color:#A6ACCD;">(obj2)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">count2</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">value</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">state </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">345</span></span>
<span class="line"><span style="color:#A6ACCD;">console</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">log</span><span style="color:#A6ACCD;">(count2</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">value)</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;">  </span><span style="color:#676E95;font-style:italic;">// {state: 345} 普通对象(浅层代理)</span></span>
<span class="line"><span style="color:#A6ACCD;">console</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">log</span><span style="color:#A6ACCD;">(obj2)</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;">  </span><span style="color:#676E95;font-style:italic;">// {state: 345} 源数据也变了，但是不会刷新视图。</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">count2</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">value </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span><span style="color:#F07178;">state</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">345</span><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;font-style:italic;">//只有.value是响应式，会触发更改, 刷新视图。</span></span>
<span class="line"><span style="color:#A6ACCD;">console</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">log</span><span style="color:#A6ACCD;">(count2</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">value)</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;font-style:italic;">//{state: 345}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><h3 id="triggerref" tabindex="-1">triggerRef() <a class="header-anchor" href="#triggerref" aria-label="Permalink to &quot;triggerRef()&quot;">​</a></h3><blockquote><p>强制触发一个<code>shallowRef()</code>的副作用函数<code>watchEffect()</code> 因为浅层的ref对象,当修改内部值时，不会触发<code>监听</code></p></blockquote><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">const</span><span style="color:#A6ACCD;"> obj </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span><span style="color:#F07178;">state</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">123</span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#C792EA;">const</span><span style="color:#A6ACCD;"> count </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">shallowRef</span><span style="color:#A6ACCD;">(obj)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">count</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">value</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">state </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">345</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;font-style:italic;">//修改内部值，不带响应式, 不触发watchEffect()</span></span>
<span class="line"><span style="color:#82AAFF;">watchEffect</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">()</span><span style="color:#C792EA;">=&gt;</span><span style="color:#A6ACCD;"> conole</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">log</span><span style="color:#A6ACCD;">(count</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">value) )</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#82AAFF;">triggerRef</span><span style="color:#A6ACCD;">(count)</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;font-style:italic;">//强制触发   //345</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h3 id="customref" tabindex="-1">customRef() <a class="header-anchor" href="#customref" aria-label="Permalink to &quot;customRef()&quot;">​</a></h3><blockquote><p>创建一个自定义的ref,使用回调函数的<code>get</code>和<code>set</code><br> 内部使用<code>trigger()</code>实现<code>通知vue重新解析模板</code> 内部使用<code>track()</code>实现<code>通知vue追踪响应式依赖</code></p></blockquote><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;">// 看起来customRef()对于hooks, 或者精细化操作响应式过程，非常重要。</span></span>
<span class="line"><span style="color:#C792EA;">function</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">myRef</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;font-style:italic;">value</span><span style="color:#89DDFF;">){</span></span>
<span class="line"><span style="color:#F07178;">	</span><span style="color:#89DDFF;font-style:italic;">return</span><span style="color:#F07178;"> </span><span style="color:#82AAFF;">customRef</span><span style="color:#F07178;">(</span></span>
<span class="line"><span style="color:#F07178;">			</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;font-style:italic;">track</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;font-style:italic;">trigger</span><span style="color:#89DDFF;">)</span><span style="color:#F07178;"> </span><span style="color:#C792EA;">=&gt;</span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">					</span><span style="color:#89DDFF;font-style:italic;">return</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">						get</span><span style="color:#89DDFF;">(){</span></span>
<span class="line"><span style="color:#F07178;">							</span><span style="color:#82AAFF;">track</span><span style="color:#F07178;">()</span><span style="color:#89DDFF;">;</span><span style="color:#F07178;"> </span><span style="color:#676E95;font-style:italic;">//通知vue追踪响应式依赖 value</span></span>
<span class="line"><span style="color:#F07178;">							</span><span style="color:#89DDFF;font-style:italic;">return</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">value</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">						</span><span style="color:#89DDFF;">},</span></span>
<span class="line"><span style="color:#F07178;">						set</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;font-style:italic;">newValue</span><span style="color:#89DDFF;">){</span></span>
<span class="line"><span style="color:#F07178;">							</span><span style="color:#A6ACCD;">value</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">newValue</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">							</span><span style="color:#82AAFF;">trigger</span><span style="color:#F07178;">()</span><span style="color:#89DDFF;">;</span><span style="color:#F07178;"> </span><span style="color:#676E95;font-style:italic;">//通知vue重新解析模板</span></span>
<span class="line"><span style="color:#F07178;">						</span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#F07178;">					</span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#F07178;">			</span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#F07178;">	)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C792EA;">const</span><span style="color:#A6ACCD;"> count </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">myRef</span><span style="color:#A6ACCD;">(</span><span style="color:#F78C6C;">0</span><span style="color:#A6ACCD;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">count</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">value</span><span style="color:#89DDFF;">++;</span><span style="color:#A6ACCD;">  </span><span style="color:#676E95;font-style:italic;">//视图会跟着更新</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br></div></div><h3 id="shallowreactive" tabindex="-1">shallowReactive() <a class="header-anchor" href="#shallowreactive" aria-label="Permalink to &quot;shallowReactive()&quot;">​</a></h3><blockquote><p>浅层次的<code>reactive()</code>形式。 类比<code>shallowRef()</code>, 也就是只有<code>根级别的属性</code>是响应式的。<br> 只有完整的修改<code>根级别属性值</code>，才会触发<code>更新</code>。</p></blockquote><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">const</span><span style="color:#A6ACCD;"> obj </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">shallowReactive</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">	</span><span style="color:#F07178;">user</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">		</span><span style="color:#F07178;">name</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">admin</span><span style="color:#89DDFF;">&#39;</span></span>
<span class="line"><span style="color:#A6ACCD;">	</span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">obj</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">user</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">name </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">zhangsan</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;font-style:italic;">//不触发视图更新和监听</span></span>
<span class="line"><span style="color:#A6ACCD;">obj</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">user </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span><span style="color:#A6ACCD;"> </span><span style="color:#F07178;">name</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">zhangsan</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">};</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;font-style:italic;">//触发视图更新和监听</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h3 id="shallowreadonly" tabindex="-1">shallowReadonly() <a class="header-anchor" href="#shallowreadonly" aria-label="Permalink to &quot;shallowReadonly()&quot;">​</a></h3><blockquote><p>浅层次的<code>readonly()</code>形式。 只有<code>根级别属性</code>转为了只读。</p></blockquote><h3 id="toraw" tabindex="-1">toRaw() <a class="header-anchor" href="#toraw" aria-label="Permalink to &quot;toRaw()&quot;">​</a></h3><blockquote><p>获取到<code>响应式对象</code>(reactive和readonly系列)的原始数据源。<br> 可以用于<code>临时读取</code>,而不引起追踪开销。<br> 与<code>快照</code>不同，是<code>引用</code>，如果<code>响应式对象</code>中途修改了，再次打印时值也会修改。</p></blockquote><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">const</span><span style="color:#A6ACCD;"> count </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">reactive</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">	</span><span style="color:#F07178;">user</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">admin</span><span style="color:#89DDFF;">&#39;</span></span>
<span class="line"><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;">)</span></span>
<span class="line"><span style="color:#C792EA;">const</span><span style="color:#A6ACCD;"> userObj </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">toRaw</span><span style="color:#A6ACCD;">(count)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">console</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">log</span><span style="color:#A6ACCD;">(userObj) </span><span style="color:#676E95;font-style:italic;">//{ user: &#39;admin&#39; }</span></span>
<span class="line"><span style="color:#A6ACCD;">count</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">user </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">ddd</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">console</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">log</span><span style="color:#A6ACCD;">(userObj) </span><span style="color:#676E95;font-style:italic;">//{ user: &#39;ddd&#39; }</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><h3 id="markraw" tabindex="-1">markRaw() <a class="header-anchor" href="#markraw" aria-label="Permalink to &quot;markRaw()&quot;">​</a></h3><blockquote><p>将一个对象，标记为<code>禁止转为代理</code>的对象。</p></blockquote><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">const</span><span style="color:#A6ACCD;"> obj1 </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{}</span></span>
<span class="line"><span style="color:#C792EA;">const</span><span style="color:#A6ACCD;"> user1 </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">reactive</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">	</span><span style="color:#F07178;">obj</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> obj1</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;">)</span></span>
<span class="line"><span style="color:#A6ACCD;">console</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">log</span><span style="color:#A6ACCD;">(</span><span style="color:#82AAFF;">isReactive</span><span style="color:#A6ACCD;">(user1</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">obj))</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;font-style:italic;">//true</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C792EA;">const</span><span style="color:#A6ACCD;"> obj2 </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">markRaw</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">{}</span><span style="color:#A6ACCD;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#C792EA;">const</span><span style="color:#A6ACCD;"> user2 </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">reactive</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">	</span><span style="color:#F07178;">obj</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> obj2</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;">)</span></span>
<span class="line"><span style="color:#A6ACCD;">console</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">log</span><span style="color:#A6ACCD;">(</span><span style="color:#82AAFF;">isReactive</span><span style="color:#A6ACCD;">(user2</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">obj))</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;font-style:italic;">//false</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><h2 id="生命周期钩子" tabindex="-1">生命周期钩子 <a class="header-anchor" href="#生命周期钩子" aria-label="Permalink to &quot;生命周期钩子&quot;">​</a></h2><blockquote><p>详情见上一篇<a href="./basic.html">vue3基础</a> vue2<code>动态组件keep-alive</code>，对应的生命周期<code>activated()</code>和<code>deactivated()</code><br> vue3中为<code>onActivated()</code>和<code>deActivated()</code></p></blockquote><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#82AAFF;">onActivated</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">()</span><span style="color:#C792EA;">=&gt;</span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">	</span><span style="color:#A6ACCD;">console</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">log</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">被激活了</span><span style="color:#89DDFF;">&#39;</span><span style="color:#F07178;">)</span></span>
<span class="line"><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;">)</span><span style="color:#89DDFF;">;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><div class="language-html line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">html</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">KeepAlive</span><span style="color:#89DDFF;"> </span><span style="color:#C792EA;">:max</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">10</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;"> </span><span style="color:#C792EA;">:include</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">/a|b/</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;"> </span><span style="color:#C792EA;">:exclude</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;&quot;</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">component</span><span style="color:#89DDFF;"> </span><span style="color:#C792EA;">:is</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">activeComponent</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;"> /&gt;</span></span>
<span class="line"><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">KeepAlive</span><span style="color:#89DDFF;">&gt;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h2 id="依赖注入" tabindex="-1">依赖注入 <a class="header-anchor" href="#依赖注入" aria-label="Permalink to &quot;依赖注入&quot;">​</a></h2><blockquote><p>详情见上一篇<a href="./basic.html">vue3基础</a></p></blockquote><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;">// 提供依赖</span></span>
<span class="line"><span style="color:#C792EA;">const</span><span style="color:#A6ACCD;"> count </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">ref</span><span style="color:#A6ACCD;">(</span><span style="color:#F78C6C;">12</span><span style="color:#A6ACCD;">)</span></span>
<span class="line"><span style="color:#82AAFF;">provide</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">count</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> count)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;">// 被注入,消费值</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">// 赋给响应式变量</span></span>
<span class="line"><span style="color:#C792EA;">const</span><span style="color:#A6ACCD;"> myCount </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">ref</span><span style="color:#A6ACCD;">(</span><span style="color:#F78C6C;">0</span><span style="color:#A6ACCD;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">myCount</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">value </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">inject</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">count</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;">// 赋给普通变量</span></span>
<span class="line"><span style="color:#C792EA;">const</span><span style="color:#A6ACCD;"> myCount2 </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">inject</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">count</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">)</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div></div></div></main><footer class="VPDocFooter" data-v-66b8709f data-v-110f1555><!--[--><!--]--><!----><nav class="prev-next" data-v-110f1555><div class="pager" data-v-110f1555><a class="pager-link prev" href="/xdocs.github.io/vue/vue3/API-global.html" data-v-110f1555><span class="desc" data-v-110f1555>Previous page</span><span class="title" data-v-110f1555>vue3全局API</span></a></div><div class="pager" data-v-110f1555><a class="pager-link next" href="/xdocs.github.io/vue/vue3/API-build.html" data-v-110f1555><span class="desc" data-v-110f1555>Next page</span><span class="title" data-v-110f1555>vue3内置内容</span></a></div></nav></footer><!--[--><!--]--></div></div></div><!--[--><!--]--></div></div><footer class="VPFooter has-sidebar" data-v-cc05ca51 data-v-3d3ea87b><div class="container" data-v-3d3ea87b><p class="message" data-v-3d3ea87b>一个陪你成长的前端博客 - XDocs</p><p class="copyright" data-v-3d3ea87b>Copyright © 2023-present <a href="https://github.com/xiao-shenghui" target="_blank">ShengHui</a></p></div></footer><!--[--><!--]--></div></div>
    <script>window.__VP_HASH_MAP__=JSON.parse("{\"miniprogram_reactnative.md\":\"83339743\",\"index.md\":\"ecbd5471\",\"javascript_html5_draggable_touch.md\":\"1246262b\",\"blog_puddle.md\":\"960e1109\",\"other_mysql.md\":\"0a3abf75\",\"blog_share.md\":\"446f754a\",\"resource_index.md\":\"fecff36b\",\"scene_skeleton_index.md\":\"901ccbc2\",\"react_react18_react-fn-component.md\":\"49234f22\",\"scene_skeleton_skeleton.md\":\"b5725c06\",\"javascript_html5_index.md\":\"f830bec1\",\"react_react18_create-react-app.md\":\"36139089\",\"javascript_jsbasic_dom.md\":\"e47d4b31\",\"vue_vue2_vue-extend-plugin.md\":\"272dfb3d\",\"tool_element-ui_el-container.md\":\"c15a3da3\",\"javascript_es6_es6_.md\":\"464e9519\",\"javascript_computernet.md\":\"6d85186a\",\"vue_vue3_index.md\":\"28a9979c\",\"miniprogram_native.md\":\"c3f6d194\",\"vue_pina_index.md\":\"f79a11c7\",\"vue_vuex_index.md\":\"22de6260\",\"vue_vue2_vue-total.md\":\"09df3f79\",\"javascript_ajax.md\":\"ab159a0f\",\"resource_js-design-model.md\":\"006c3b41\",\"blog_index.md\":\"0f488126\",\"scene_index.md\":\"996a1cd5\",\"resource_vue2-attr.md\":\"696044ed\",\"tool_vitest.md\":\"d92ee827\",\"javascript_interview_index.md\":\"22900f74\",\"other_npm-recommend.md\":\"d1b37184\",\"tool_axios_index.md\":\"ffcd31ba\",\"javascript_jsbasic_js-basic.md\":\"e430887a\",\"tool_axios_axios-interceptors.md\":\"ce0e8178\",\"tool_element-ui_index.md\":\"524fd106\",\"other_nvm.md\":\"b20320ce\",\"javascript_jsdeep_index.md\":\"ea8a60d7\",\"scene_water_waterfall.md\":\"9e5a7ce8\",\"tool_less.md\":\"426c8da8\",\"javascript_jsdeep_js-deep.md\":\"3f00ec72\",\"scene_upload_index.md\":\"859229d8\",\"javascript_es6_index.md\":\"3f0b1427\",\"scene_upload_upload-back.md\":\"d1b18560\",\"other_git.md\":\"a1b8471f\",\"react_react18_react-basic.md\":\"1e014342\",\"tool_node_nodejs.md\":\"dad6c7f2\",\"tool_sass.md\":\"0530c976\",\"tool_websocket.md\":\"15c568e2\",\"typescript_index.md\":\"94372b82\",\"javascript_es6_promise.md\":\"dc163cc5\",\"tool_jquery_jquery.md\":\"11362746\",\"react_jsx_jsx.md\":\"82d4e5c8\",\"tool_webpack.md\":\"a8abd5e1\",\"tool_node_koa.md\":\"cb7e49ef\",\"typescript_js-to-ts.md\":\"f0c44b34\",\"vue_vue-router_vue-router2.md\":\"868a4820\",\"vue_vue-router_index.md\":\"5224b300\",\"miniprogram_map.md\":\"152acf3e\",\"vue_vue-router_vue-router.md\":\"ebfe16cf\",\"other_directorylist.md\":\"e63a130e\",\"vue_vue-router_vue-total.md\":\"b3884c9f\",\"resource_vue2-note.md\":\"78c836c2\",\"miniprogram_uniapp.md\":\"c4f46b07\",\"vue_vue2_index.md\":\"0674a6e8\",\"javascript_html5_canvas.md\":\"d46c1cd1\",\"vue_vue-router_vue3-router.md\":\"3964b709\",\"vue_vue3_api-global.md\":\"9a0450ea\",\"vue_vue3_script-setup.md\":\"0e0e9f4f\",\"vue_vue2_vue-component1.md\":\"476b47d0\",\"vue_vue2_vue-component2.md\":\"bacbb769\",\"vue_vue2_vue-eventbus.md\":\"517f04e2\",\"javascript_jsbasic_index.md\":\"bb577721\",\"typescript_typescript-basic.md\":\"2aa81520\",\"vue_vue2_vue-render.md\":\"4255f5f8\",\"vue_vue2_vue-slot.md\":\"eba24002\",\"tool_element-ui_el-radio.md\":\"f3817716\",\"javascript_jsdeep_test.md\":\"efe98f58\",\"javascript_interview_case1.md\":\"b64799b3\",\"vue_vue3_api-deep.md\":\"b341848d\",\"vue_vue3_api-build.md\":\"cb65e77d\",\"scene_upload_formdata.md\":\"1d960592\",\"tool_node_express.md\":\"0f8a8032\",\"javascript_jsbasic_bom.md\":\"80904d29\",\"vue_vue3_deep.md\":\"bb8c4c00\",\"scene_upload_upload-front.md\":\"cb6c0551\",\"scene_liveplayer.md\":\"8207e36c\",\"tool_element-ui_el-row_el-col.md\":\"0866a799\",\"typescript_typescript.md\":\"fb730241\",\"tool_axios_axios-basic.md\":\"d9c0ca2f\",\"vue_vue3_api-setup.md\":\"92d8ddb2\",\"tool_node_express-koa.md\":\"4c8747eb\",\"vue_vue2_vue-directive.md\":\"9bc6de06\",\"vue_pina_pina.md\":\"3677b01e\",\"tool_node_index.md\":\"bb96f1c8\",\"vue_vue2_vue-all.md\":\"9282d92b\",\"vue_vuex_vuex.md\":\"949a3c5a\",\"javascript_datastructure.md\":\"c673db69\",\"vue_vue3_basic.md\":\"1993ade1\",\"resource_vue2-resource.md\":\"41abed84\"}");window.__VP_SITE_DATA__=JSON.parse("{\"lang\":\"en-US\",\"dir\":\"ltr\",\"title\":\"XDocs\",\"description\":\"一个用于记录的vitepress静态博客\",\"base\":\"/xdocs.github.io/\",\"head\":[],\"appearance\":true,\"themeConfig\":{\"logo\":\"/public/Logo.png\",\"socialLinks\":[{\"icon\":\"github\",\"link\":\"https://github.com/xiao-shenghui/xdocs\"}],\"siteTitle\":\"XDocs\",\"outline\":\"deep\",\"selectLanguageText\":\"选择语言\",\"selectLanguageAriaLabel\":\"选择语言\",\"nav\":[{\"text\":\"网络日志\",\"link\":\"/blog/index\"},{\"text\":\"JS & TS\",\"items\":[{\"text\":\"HTML5新增\",\"link\":\"/javascript/html5/draggable&touch\"},{\"text\":\"JS基础\",\"link\":\"/javascript/jsbasic/index\"},{\"text\":\"JS高级\",\"link\":\"/javascript/jsdeep/index\"},{\"text\":\"ES6及6+\",\"link\":\"/javascript/es6/index\"},{\"text\":\"Ajax+\",\"link\":\"/javascript/Ajax\"},{\"text\":\"jQuery\",\"link\":\"/tool/jquery/jQuery\"},{\"text\":\"Typescript\",\"items\":[{\"text\":\"TS导航\",\"link\":\"/typescript/index\"},{\"text\":\"TS基础\",\"link\":\"/typescript/typescript\"},{\"text\":\"TS合集\",\"link\":\"/typescript/typescript-basic\"},{\"text\":\"JS-To-Ts\",\"link\":\"/typescript/js-to-ts\"}]}]},{\"text\":\"Vue & React\",\"items\":[{\"text\":\"Vue\",\"items\":[{\"text\":\"Vue2\",\"link\":\"/vue/vue2/index\"},{\"text\":\"Vue-Router\",\"link\":\"/vue/vue-router/index\"},{\"text\":\"VueX\",\"link\":\"/vue/vuex/vuex\"},{\"text\":\"Vue3\",\"link\":\"/vue/vue3/index\"},{\"text\":\"Pina\",\"link\":\"/vue/pina/pina\"}]},{\"text\":\"React\",\"items\":[{\"text\":\"React-JSX\",\"link\":\"/react/jsx/JSX\"},{\"text\":\"React18\",\"link\":\"/react/react18/create-react-app\"}]}]},{\"text\":\"小程序\",\"items\":[{\"text\":\"微信小程序\",\"link\":\"/miniProgram/native\"},{\"text\":\"Uniapp\",\"link\":\"/miniProgram/uniapp\"},{\"text\":\"位置和地图\",\"link\":\"/miniProgram/map\"},{\"text\":\"React-Native\",\"link\":\"/miniProgram/reactnative\"}]},{\"text\":\"业务场景\",\"items\":[{\"text\":\"文件上传\",\"link\":\"/scene/upload/index\"},{\"text\":\"瀑布流\",\"link\":\"/scene/water/waterfall\"},{\"text\":\"骨架屏\",\"link\":\"/scene/skeleton/index\"},{\"text\":\"WebSocket\",\"link\":\"/tool/websocket\"},{\"text\":\"直播流\",\"link\":\"/scene/liveplayer\"}]},{\"text\":\"工程化及部署\",\"items\":[{\"text\":\"工程化\",\"items\":[{\"text\":\"Axios\",\"link\":\"/tool/axios/index\"},{\"text\":\"Element-Ui\",\"link\":\"/tool/element-ui/index\"},{\"text\":\"Nodejs\",\"link\":\"/tool/node/index\"},{\"text\":\"Less\",\"link\":\"/tool/less\"},{\"text\":\"Sass\",\"link\":\"/tool/sass\"},{\"text\":\"Webpack\",\"link\":\"/tool/webpack\"}]},{\"text\":\"部署和测试\",\"items\":[{\"text\":\"Vitest\",\"link\":\"/tool/vitest\"},{\"text\":\"Mysql\",\"link\":\"/other/mysql\"},{\"text\":\"Gitee\",\"link\":\"/other/git\"},{\"text\":\"Nvm\",\"link\":\"/other/nvm\"},{\"text\":\"Npm包推荐\",\"link\":\"/other/npm-recommend\"}]}]},{\"text\":\"练功房\",\"items\":[{\"text\":\"源码解析\",\"link\":\"/resource/index\"},{\"text\":\"数据结构与算法\",\"link\":\"/javascript/dataStructure\"},{\"text\":\"计算机网络\",\"link\":\"/javascript/computerNet\"},{\"text\":\"LeetCode题解\",\"link\":\"https://xiao-shenghui.github.io/xdocs-leetcode/#/\"}]},{\"text\":\"配置网站\",\"link\":\"https://vitepress.dev/reference/default-theme-nav\"}],\"sidebar\":{\"/blog\":[{\"text\":\"网络日志\",\"items\":[{\"text\":\"栏目导航\",\"link\":\"/blog/index\"},{\"text\":\"踩坑日志\",\"link\":\"/blog/puddle\"},{\"text\":\"今日分享\",\"link\":\"/blog/share\"}]}],\"/vue/vue2\":[{\"text\":\"Vue2\",\"items\":[{\"text\":\"导航目录\",\"link\":\"/vue/vue2/index\"},{\"text\":\"vue指令\",\"link\":\"/vue/vue2/vue-directive\"},{\"text\":\"vue组件\",\"link\":\"/vue/vue2/vue-component1\"},{\"text\":\"vue插槽\",\"link\":\"/vue/vue2/vue-slot\"},{\"text\":\"vue父子数据互传\",\"link\":\"/vue/vue2/vue-component2\"},{\"text\":\"vue跨组件通信-EventBus\",\"link\":\"/vue/vue2/vue-eventbus\"},{\"text\":\"vue扩展和插件\",\"link\":\"/vue/vue2/vue-extend-plugin\"},{\"text\":\"vue-render渲染函数\",\"link\":\"/vue/vue2/vue-render\"},{\"text\":\"vue-从零开始\",\"link\":\"/vue/vue2/vue-all\"},{\"text\":\"vue笔记总结\",\"link\":\"/vue/vue2/vue-total\"}]}],\"/vue/vue3\":[{\"text\":\"Vue3\",\"items\":[{\"text\":\"导航目录\",\"link\":\"/vue/vue3/index\"},{\"text\":\"vue3基础\",\"link\":\"/vue/vue3/basic\"},{\"text\":\"vue3深入\",\"link\":\"/vue/vue3/deep\"},{\"text\":\"vue3全局API\",\"link\":\"/vue/vue3/API-global\"},{\"text\":\"vue3组合式API\",\"link\":\"/vue/vue3/API-setup\"},{\"text\":\"vue3内置内容\",\"link\":\"/vue/vue3/API-build\"},{\"text\":\"vue3进阶API\",\"link\":\"/vue/vue3/API-deep\"},{\"text\":\"vue3-setup语法糖\",\"link\":\"/vue/vue3/Script-setup\"}]}],\"/vue/vue-router\":[{\"text\":\"Vue-Router\",\"items\":[{\"text\":\"导航目录\",\"link\":\"/vue/vue-router/index\"},{\"text\":\"vue2-路由基础\",\"link\":\"/vue/vue-router/vue-router\"},{\"text\":\"vue2-动态路由匹配\",\"link\":\"/vue/vue-router/vue-router2\"},{\"text\":\"vue2-路由总结\",\"link\":\"/vue/vue-router/vue-total\"},{\"text\":\"vue3-路由\",\"link\":\"/vue/vue-router/vue3-router\"}]}],\"/react/react18\":[{\"text\":\"React18\",\"items\":[{\"text\":\"create-react-app\",\"link\":\"/react/react18/create-react-app\"},{\"text\":\"React基础\",\"link\":\"/react/react18/react-basic\"}]}],\"/tool/axios\":[{\"text\":\"Axios\",\"items\":[{\"text\":\"index\",\"link\":\"/tool/axios/index\"},{\"text\":\"axios基本使用\",\"link\":\"/tool/axios/axios-basic\"},{\"text\":\"axios拦截器\",\"link\":\"/tool/axios/axios-interceptors\"}]}],\"/tool/element-ui\":[{\"text\":\"ElementUI\",\"items\":[{\"text\":\"index\",\"link\":\"/tool/element-ui/index\"},{\"text\":\"el-row及el-col源码\",\"link\":\"/tool/element-ui/el-row+el-col\"},{\"text\":\"el-container源码\",\"link\":\"/tool/element-ui/el-container\"},{\"text\":\"el-radio源码\",\"link\":\"/tool/element-ui/el-radio\"}]}],\"/tool/node\":[{\"text\":\"Nodejs\",\"items\":[{\"text\":\"index\",\"link\":\"/tool/node/index\"},{\"text\":\"Nodejs\",\"link\":\"/tool/node/nodejs\"},{\"text\":\"Express\",\"link\":\"/tool/node/express\"},{\"text\":\"Koa\",\"link\":\"/tool/node/koa\"},{\"text\":\"Express VS Koa\",\"link\":\"/tool/node/express-koa\"}]}],\"/javascript/html5\":[{\"text\":\"HTML5新增\",\"items\":[{\"text\":\"index\",\"link\":\"/javascript/html5/index\"},{\"text\":\"拖拽和触摸\",\"link\":\"/javascript/html5/draggable&touch\"},{\"text\":\"Canvas画板\",\"link\":\"/javascript/html5/canvas\"}]}],\"/javascript/jsbasic\":[{\"text\":\"JS基础\",\"items\":[{\"text\":\"index\",\"link\":\"/javascript/jsbasic/index\"},{\"text\":\"JS基础\",\"link\":\"/javascript/jsbasic/js-basic\"},{\"text\":\"DOM\",\"link\":\"/javascript/jsbasic/DOM\"},{\"text\":\"BOM\",\"link\":\"/javascript/jsbasic/BOM\"}]}],\"/javascript/jsdeep\":[{\"text\":\"JS高级\",\"items\":[{\"text\":\"index\",\"link\":\"/javascript/jsdeep/index\"},{\"text\":\"JS进阶\",\"link\":\"/javascript/jsdeep/js-deep\"},{\"text\":\"面试题\",\"link\":\"/javascript/jsdeep/test\"}]}],\"/javascript/es6\":[{\"text\":\"ES6-6+\",\"items\":[{\"text\":\"index\",\"link\":\"/javascript/es6/index\"},{\"text\":\"ES6+\",\"link\":\"/javascript/es6/ES6+\"},{\"text\":\"Promise\",\"link\":\"/javascript/es6/Promise\"}]}],\"/resource/\":[{\"text\":\"源码学习\",\"items\":[{\"text\":\"index\",\"link\":\"/resource/index\"},{\"text\":\"Vue2源码解析\",\"link\":\"/resource/vue2-resource\"},{\"text\":\"Vue2属性和方法大全\",\"link\":\"/resource/vue2-attr\"},{\"text\":\"Vue2心得体会\",\"link\":\"/resource/vue2-note\"},{\"text\":\"理解设计模式\",\"link\":\"/resource/js-design-model\"}]}],\"/scene/upload/\":[{\"text\":\"文件上传\",\"items\":[{\"text\":\"index\",\"link\":\"/scene/upload/index\"},{\"text\":\"文件上传之前端\",\"link\":\"/scene/upload/upload-front\"},{\"text\":\"文件上传之后端\",\"link\":\"/scene/upload/upload-back\"},{\"text\":\"完整上传案例-formData\",\"link\":\"/scene/upload/formData\"}]}],\"/scene/skeleton/\":[{\"text\":\"骨架屏\",\"items\":[{\"text\":\"index\",\"link\":\"/scene/skeleton/index\"},{\"text\":\"初步认识骨架屏\",\"link\":\"/scene/skeleton/skeleton\"}]}]},\"footer\":{\"message\":\"一个陪你成长的前端博客 - XDocs\",\"copyright\":\"Copyright © 2023-present <a href=\\\"https://github.com/xiao-shenghui\\\" target=\\\"_blank\\\">ShengHui</a>\"},\"search\":{\"provider\":\"local\"}},\"locales\":{},\"scrollOffset\":90,\"cleanUrls\":false}");</script>
    
  </body>
</html>